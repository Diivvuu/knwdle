@import 'tailwindcss';
@source "../../../apps/**/*.{ts,tsx}";
@source "../../../components/**/*.{ts,tsx}";
@source "../**/*.{ts,tsx}";
@import 'tw-animate-css';

@custom-variant dark (&:is(.dark *));

/* =========================
   KNWDLE THEME SYSTEM
   Premium • Energetic • Inviting
   Blue-Orange harmony for trust + energy
   ========================= */

/* =========================
   LIGHT MODE
   Fresh, Professional, Energetic
   ========================= */
:root {
  /* ---------- Foundations (Light, Crayon Pastel) ---------- */
  --background: #fff9ef; /* warmer paper-like tone */
  --foreground: #2d2d2d; /* dark graphite for cozy contrast */

  --card: #fff9f1;
  --card-foreground: #2d2d2d;

  --popover: #fff9f1;
  --popover-foreground: #2d2d2d;

  --border: #d9d4c5; /* stronger separation, warm sand */
  --input: #faf4e7; /* improved creamy surface */
  --ring: #90caf9; /* pastel blue focus (unchanged) */

  /* ---------- Brand Colors (Crayon Pastel) ---------- */
  --primary: #6fb6e9; /* deeper sky blue */
  --primary-foreground: #2d2d2d;

  --secondary: #ffb961; /* deeper peachy-orange */
  --secondary-foreground: #2d2d2d;

  --accent: #93d2a2; /* deeper minty green */
  --accent-foreground: #2d2d2d;

  /* Support tints for playful UI (crayon pastels) */
  --pink: #f8bbd0; /* gentle pastel pink */
  --lime: #d4e157; /* grassy crayon lime */
  --purple: #ce93d8; /* lilac pastel */
  --yellow: #fff59d; /* creamy yellow */
  --teal: #80deea; /* soft pastel teal */

  /* ---------- Gradients (Livelier Pastel Blends) ---------- */
  --grad-primary: linear-gradient(135deg, #6fb6e9 0%, #a6d3f2 100%);
  --grad-secondary: linear-gradient(135deg, #ffb961 0%, #ffe39c 100%);
  --grad-accent: linear-gradient(135deg, #93d2a2 0%, #7cd8c0 100%);
  --grad-candy: linear-gradient(135deg, #f8bbd0 0%, #93d2a2 50%, #6fb6e9 100%);

  /* ---------- Neutrals ---------- */
  --muted: #f5efe3; /* softer, higher contrast muted surface */
  --muted-foreground: #8a8a8a; /* soft graphite */

  --destructive: #ef9a9a; /* gentle crayon red */
  --destructive-foreground: #2d2d2d;

  /* ---------- Status Colors ---------- */
  --success: #93d2a2;
  --success-foreground: #2d2d2d;

  --warning: #ffe082;
  --warning-foreground: #2d2d2d;

  --info: #81d4fa;
  --info-foreground: #2d2d2d;

  /* ---------- Educational Context Colors ---------- */
  --attendance-present: #93d2a2;
  --attendance-absent: #ef9a9a;
  --attendance-late: #ffe082;

  --fee-paid: #93d2a2;
  --fee-pending: #ffe082;
  --fee-overdue: #ef9a9a;

  --performance-excellent: #93d2a2;
  --performance-good: #6fb6e9;
  --performance-needs-improvement: #ffe082;
  --performance-poor: #ef9a9a;

  /* ---------- Charts ---------- */
  --chart-1: #6fb6e9; /* sky blue */
  --chart-2: #ffb961; /* peachy orange */
  --chart-3: #93d2a2; /* minty green */
  --chart-4: #ce93d8; /* lilac */
  --chart-5: #f8bbd0; /* pink */

  --radius: 12px;

  /* ---------- Sidebar ---------- */
  --sidebar: #fff9f1;
  --sidebar-foreground: #2d2d2d;
  --sidebar-primary: #6fb6e9;
  --sidebar-primary-foreground: #2d2d2d;
  --sidebar-accent: #f5efe3;
  --sidebar-accent-foreground: #2d2d2d;
  --sidebar-border: #d9d4c5;
  --sidebar-ring: #6fb6e9;

  /* ---------- AI Assistant (Pastel Glow) ---------- */
  --ai-primary: #6fb6e9;
  --ai-secondary: #ce93d8;
  --ai-accent: #93d2a2;
  --ai-background: #f5efe3;
  --ai-glow: rgba(144, 202, 249, 0.13);
}

/* =========================
   DARK MODE
   Deep, Comfortable, Immersive
   ========================= */
.dark {
  /* ---------- Foundations (Dark, Chalkboard Pastel) ---------- */
  --background: #1b1b1b; /* deeper, true blackboard */
  --foreground: #f5f5f5; /* chalk white */

  --card: #242424; /* slightly lighter blackboard */
  --card-foreground: #f5f5f5;

  --popover: #242424;
  --popover-foreground: #f5f5f5;

  --border: #353535; /* chalky gray */
  --input: #242424; /* match card */
  --ring: #81d4fa; /* pastel blue ring (unchanged for glow) */

  /* ---------- Brand Colors (Chalk Pastel) ---------- */
  --primary: #81d4fa; /* soft chalky blue */
  --primary-foreground: #1b1b1b;

  --secondary: #ffb74d; /* pastel orange chalk */
  --secondary-foreground: #1b1b1b;

  --accent: #81c784; /* minty green chalk */
  --accent-foreground: #1b1b1b;

  /* Playful extras (chalk pastels) */
  --pink: #f48fb1;
  --lime: #dce775;
  --purple: #b39ddb;
  --yellow: #fff176;
  --teal: #4dd0e1;

  /* ---------- Gradients (Soft Chalk Blends) ---------- */
  --grad-primary: linear-gradient(135deg, #81d4fa 0%, #b39ddb 100%);
  --grad-secondary: linear-gradient(135deg, #ffb74d 0%, #fff176 100%);
  --grad-accent: linear-gradient(135deg, #81c784 0%, #4dd0e1 100%);
  --grad-candy: linear-gradient(135deg, #f48fb1 0%, #81c784 50%, #81d4fa 100%);

  /* ---------- Neutrals ---------- */
  --muted: #2b2b2b; /* more contrast muted panel */
  --muted-foreground: #b0b0b0; /* chalk gray */

  --destructive: #e57373;
  --destructive-foreground: #1b1b1b;

  /* ---------- Status Colors ---------- */
  --success: #81c784;
  --success-foreground: #1b1b1b;

  --warning: #fff176;
  --warning-foreground: #1b1b1b;

  --info: #81d4fa;
  --info-foreground: #1b1b1b;

  /* ---------- Educational Context Colors ---------- */
  --attendance-present: #81c784;
  --attendance-absent: #e57373;
  --attendance-late: #fff176;

  --fee-paid: #81c784;
  --fee-pending: #fff176;
  --fee-overdue: #e57373;

  --performance-excellent: #81c784;
  --performance-good: #81d4fa;
  --performance-needs-improvement: #fff176;
  --performance-poor: #e57373;

  /* ---------- Charts ---------- */
  --chart-1: #81d4fa; /* blue */
  --chart-2: #ffb74d; /* orange */
  --chart-3: #81c784; /* green */
  --chart-4: #b39ddb; /* lilac */
  --chart-5: #f48fb1; /* pink */

  /* ---------- Sidebar ---------- */
  --sidebar: #1b1b1b;
  --sidebar-foreground: #f5f5f5;
  --sidebar-primary: #81d4fa;
  --sidebar-primary-foreground: #1b1b1b;
  --sidebar-accent: #242424;
  --sidebar-accent-foreground: #f5f5f5;
  --sidebar-border: #353535;
  --sidebar-ring: #81d4fa;

  /* ---------- AI Assistant (Chalk Glow) ---------- */
  --ai-primary: #81d4fa;
  --ai-secondary: #b39ddb;
  --ai-accent: #81c784;
  --ai-background: #242424;
  --ai-glow: rgba(129, 212, 250, 0.22);
}

/* =========================
   THEME UTILITY
   ========================= */
@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);
  --color-warning: var(--warning);
  --color-warning-foreground: var(--warning-foreground);
  --color-info: var(--info);
  --color-info-foreground: var(--info-foreground);
  --radius-md: var(--radius);

  /* Educational context colors */
  --color-attendance-present: var(--attendance-present);
  --color-attendance-absent: var(--attendance-absent);
  --color-attendance-late: var(--attendance-late);
  --color-fee-paid: var(--fee-paid);
  --color-fee-pending: var(--fee-pending);
  --color-fee-overdue: var(--fee-overdue);
  --color-performance-excellent: var(--performance-excellent);
  --color-performance-good: var(--performance-good);
  --color-performance-needs-improvement: var(--performance-needs-improvement);
  --color-performance-poor: var(--performance-poor);

  /* AI Assistant colors */
  --color-ai-primary: var(--ai-primary);
  --color-ai-secondary: var(--ai-secondary);
  --color-ai-accent: var(--ai-accent);
  --color-ai-background: var(--ai-background);
  --color-ai-glow: var(--ai-glow);

  --color-pink: var(--pink);
  --color-lime: var(--lime);
  --color-purple: var(--purple);
  --color-yellow: var(--yellow);
  --color-teal: var(--teal);

  --gradient-primary: var(--grad-primary);
  --gradient-secondary: var(--grad-secondary);
  --gradient-accent: var(--grad-accent);
  --gradient-candy: var(--grad-candy);
}

/* =========================
   BASE + UTILITIES
   ========================= */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground antialiased;
  }

  /* Smooth transitions */
  * {
    transition-property:
      background-color, border-color, color, fill, stroke, box-shadow;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 250ms;
  }

  button,
  a,
  [role='button'] {
    @apply cursor-pointer;
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Premium elevation system */
  .elev-1 {
    box-shadow:
      0 1px 2px 0 rgba(0, 0, 0, 0.05),
      0 1px 3px 0 rgba(0, 0, 0, 0.1);
  }

  .elev-2 {
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -2px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(0, 0, 0, 0.05);
  }

  .elev-3 {
    box-shadow:
      0 10px 15px -3px rgba(0, 0, 0, 0.1),
      0 4px 6px -4px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(0, 0, 0, 0.05);
  }

  .elev-4 {
    box-shadow:
      0 20px 25px -5px rgba(0, 0, 0, 0.1),
      0 8px 10px -6px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(0, 0, 0, 0.05);
  }

  /* AI feature glow effects */
  .ai-glow {
    box-shadow:
      0 0 20px -5px var(--ai-glow),
      0 0 40px -10px var(--ai-glow);
  }

  .ai-glow-strong {
    box-shadow:
      0 0 30px -5px var(--ai-glow),
      0 0 60px -10px var(--ai-glow),
      0 0 100px -20px var(--ai-glow);
  }

  /* Gradient backgrounds */
  .gradient-blue {
    background: linear-gradient(135deg, var(--primary) 0%, #1d4ed8 100%);
  }

  .gradient-blue-cyan {
    background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
  }

  .gradient-orange {
    background: linear-gradient(135deg, var(--secondary) 0%, #ea580c 100%);
  }

  /* Status badge utilities */
  .status-present {
    @apply bg-emerald-50 text-emerald-700 dark:bg-emerald-950/40 dark:text-emerald-400 
           border border-emerald-200 dark:border-emerald-800/50;
  }

  .status-absent {
    @apply bg-red-50 text-red-700 dark:bg-red-950/40 dark:text-red-400 
           border border-red-200 dark:border-red-800/50;
  }

  .status-late {
    @apply bg-amber-50 text-amber-700 dark:bg-amber-950/40 dark:text-amber-400 
           border border-amber-200 dark:border-amber-800/50;
  }

  .status-paid {
    @apply bg-emerald-50 text-emerald-700 dark:bg-emerald-950/40 dark:text-emerald-400 
           border border-emerald-200 dark:border-emerald-800/50;
  }

  .status-pending {
    @apply bg-amber-50 text-amber-700 dark:bg-amber-950/40 dark:text-amber-400 
           border border-amber-200 dark:border-amber-800/50;
  }

  .status-overdue {
    @apply bg-red-50 text-red-700 dark:bg-red-950/40 dark:text-red-400 
           border border-red-200 dark:border-red-800/50;
  }

  /* Micro-interactions */
  .hover-lift {
    @apply transition-transform duration-200 ease-out;
  }

  .hover-lift:hover {
    @apply -translate-y-0.5;
  }

  .hover-glow:hover {
    @apply shadow-lg shadow-primary/20;
  }

  /* Glass morphism */
  .glass {
    @apply bg-white/80 dark:bg-white/5 backdrop-blur-xl border border-black/5 dark:border-white/10;
  }

  .glass-strong {
    @apply bg-white/90 dark:bg-white/10 backdrop-blur-2xl border border-black/10 dark:border-white/20;
  }

  /* =========================
     Playful Utilities (Knwdle)
     ========================= */

  /* Text gradient utilities */
  .text-gradient-primary {
    background: var(--grad-primary);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }
  .text-gradient-secondary {
    background: var(--grad-secondary);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }
  .text-gradient-candy {
    background: var(--grad-candy);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  /* Background gradient helpers */
  .bg-grad-primary {
    background: var(--grad-primary);
  }
  .bg-grad-secondary {
    background: var(--grad-secondary);
  }
  .bg-grad-accent {
    background: var(--grad-accent);
  }
  .bg-grad-candy {
    background: var(--grad-candy);
  }

  /* Playful conic-ring border used by fancy buttons/badges */
  .ring-orbit {
    position: relative;
  }
  .ring-orbit::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    background: conic-gradient(
      from var(--_angle, 0deg),
      var(--primary) 0 12%,
      transparent 12% 100%
    );
    -webkit-mask: radial-gradient(
      farthest-side,
      transparent calc(100% - 2px),
      #000 calc(100% - 2px)
    );
    mask: radial-gradient(
      farthest-side,
      transparent calc(100% - 2px),
      #000 calc(100% - 2px)
    );
    animation: kn-orbit 4s linear infinite;
    opacity: 0.9;
  }

  /* Soft candy sheen overlay */
  .overlay-sheen {
    position: relative;
    overflow: hidden;
  }
  .overlay-sheen::before {
    content: '';
    position: absolute;
    inset: 0;
    left: -35%;
    width: 35%;
    border-radius: inherit;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.25),
      transparent
    );
    filter: blur(0.5px);
    opacity: 0;
    transition:
      transform 0.7s ease-out,
      opacity 0.2s ease-out;
    transform: translateX(0);
  }
  .overlay-sheen:hover::before {
    opacity: 1;
    transform: translateX(260%);
  }

  /* Confetti dots (subtle, for playful sections) */
  .bg-confetti {
    background-image:
      radial-gradient(
        circle at 20% 20%,
        color-mix(in oklab, var(--pink), white 10%) 0 2px,
        transparent 3px
      ),
      radial-gradient(
        circle at 80% 30%,
        color-mix(in oklab, var(--lime), white 10%) 0 2px,
        transparent 3px
      ),
      radial-gradient(
        circle at 40% 70%,
        color-mix(in oklab, var(--accent), white 10%) 0 2px,
        transparent 3px
      ),
      radial-gradient(
        circle at 70% 80%,
        color-mix(in oklab, var(--purple), white 10%) 0 2px,
        transparent 3px
      );
    background-size: 24px 24px;
    background-color: color-mix(in oklab, var(--background), white 3%);
  }

  /* Playful badge palette */
  .badge-pink {
    background: color-mix(in oklab, var(--pink), white 88%);
    color: var(--pink);
  }
  .badge-lime {
    background: color-mix(in oklab, var(--lime), white 88%);
    color: var(--lime);
  }
  .badge-purple {
    background: color-mix(in oklab, var(--purple), white 88%);
    color: var(--purple);
  }
  .badge-yellow {
    background: color-mix(in oklab, var(--yellow), white 88%);
    color: #8a6f00;
  }
  .badge-teal {
    background: color-mix(in oklab, var(--teal), white 88%);
    color: var(--teal);
  }
}

/* Hide scrollbars but keep scrolling */
::-webkit-scrollbar {
  width: 0;
  height: 0;
}

* {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

html,
body {
  overflow: auto;
}

/* Custom scrollbar for specific areas */
.custom-scroll::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.custom-scroll::-webkit-scrollbar-track {
  @apply bg-transparent;
}

.custom-scroll::-webkit-scrollbar-thumb {
  @apply bg-primary/20 rounded-full;
}

.custom-scroll::-webkit-scrollbar-thumb:hover {
  @apply bg-primary/40;
}

@keyframes kn-orbit {
  to {
    --_angle: 360deg;
  }
}
/* =========================
   KNWDLE CRAYON DASHBOARD (Final Theme-Linked)
   ========================= */

/* ---------- Shared card base ---------- */
.crayon-card {
  border-radius: 14px;
  border: 1px solid color-mix(in oklab, var(--border), white 25%);
  background: linear-gradient(
    155deg,
    color-mix(in oklab, var(--muted) 92%, var(--background) 8%),
    color-mix(in oklab, var(--muted) 70%, var(--background) 30%)
  );
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.04),
    0 4px 8px rgba(0, 0, 0, 0.06);
  padding: 1rem;
  overflow: hidden;
  transition:
    transform 0.2s ease,
    box-shadow 0.2s ease;
}
.crayon-card:hover {
  transform: translateY(-2px);
  box-shadow:
    0 4px 10px rgba(0, 0, 0, 0.08),
    0 8px 16px rgba(0, 0, 0, 0.06);
}

/* ---------- Widget variants ---------- */
.widget-attendance {
  background: linear-gradient(
    150deg,
    color-mix(in oklab, var(--accent) 65%, var(--background) 35%),
    color-mix(in oklab, var(--accent) 30%, var(--muted) 70%)
  );
  border: 1px solid color-mix(in oklab, var(--accent), white 45%);
  color: var(--foreground);
}

.widget-finance {
  background: linear-gradient(
    150deg,
    color-mix(in oklab, var(--secondary) 60%, var(--background) 40%),
    color-mix(in oklab, var(--secondary) 25%, var(--muted) 75%)
  );
  border: 1px solid color-mix(in oklab, var(--secondary), white 45%);
  color: var(--foreground);
}

.widget-members {
  background: linear-gradient(
    150deg,
    color-mix(in oklab, var(--primary) 65%, var(--background) 35%),
    color-mix(in oklab, var(--primary) 25%, var(--muted) 75%)
  );
  border: 1px solid color-mix(in oklab, var(--primary), white 45%);
  color: var(--foreground);
}

.widget-units {
  background: linear-gradient(
    150deg,
    color-mix(in oklab, var(--teal) 60%, var(--background) 40%),
    color-mix(in oklab, var(--teal) 25%, var(--muted) 75%)
  );
  border: 1px solid color-mix(in oklab, var(--teal), white 45%);
  color: var(--foreground);
}

.widget-announcements {
  background: linear-gradient(
    150deg,
    color-mix(in oklab, var(--purple) 60%, var(--background) 40%),
    color-mix(in oklab, var(--purple) 25%, var(--muted) 75%)
  );
  border: 1px solid color-mix(in oklab, var(--purple), white 45%);
  color: var(--foreground);
}

.widget-generic,
.widget-summary,
.widget-table {
  background: linear-gradient(
    150deg,
    color-mix(in oklab, var(--muted) 85%, var(--background) 15%),
    color-mix(in oklab, var(--muted) 70%, var(--background) 30%)
  );
  border: 1px solid color-mix(in oklab, var(--border), white 20%);
  color: var(--foreground);
}

/* ---------- Summary cards ---------- */
.summary-card {
  position: relative;
  border-radius: 14px;
  border: 1px solid color-mix(in oklab, var(--border), white 30%);
  background: linear-gradient(
    155deg,
    color-mix(in oklab, var(--muted) 88%, var(--background) 12%),
    color-mix(in oklab, var(--muted) 75%, var(--background) 25%)
  );
  text-align: center;
  box-shadow: 0 1px 4px color-mix(in oklab, var(--foreground), black 80%);
  transition: all 0.25s ease;
}

.summary-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 10px color-mix(in oklab, var(--foreground), black 80%);
}

/* ---------- Tables ---------- */
.crayon-table {
  border-radius: 14px;
  border: 1px solid color-mix(in oklab, var(--border), white 30%);
  background: linear-gradient(
    150deg,
    color-mix(in oklab, var(--muted) 85%, var(--background) 15%),
    color-mix(in oklab, var(--muted) 70%, var(--background) 30%)
  );
  color: var(--foreground);
  box-shadow: 0 2px 6px color-mix(in oklab, var(--foreground), black 80%);
  overflow: hidden;
}

.crayon-table th {
  background: color-mix(in oklab, var(--muted), var(--background) 30%);
  font-weight: 600;
  color: var(--foreground);
}

.crayon-table tr:nth-child(even) td {
  background: color-mix(in oklab, var(--background), var(--muted) 10%);
}

.crayon-table tr:hover td {
  background: color-mix(in oklab, var(--accent), var(--background) 80%);
  transition: background 0.25s ease;
}

.table {
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 1px 4px color-mix(in oklab, var(--foreground), black 80%);
}

.table-row:hover td {
  background: color-mix(in oklab, var(--accent), var(--background) 90%);
}
